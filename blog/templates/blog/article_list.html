{% extends 'blog/base.html' %}

{% block content %}
  <div style="max-width: 800px; margin: auto; padding: 20px;">
    <h2 style="text-align: center;">All Articles</h2>

    <!-- Tambahkan tombol Create New Article -->
    <div style="text-align: right; margin-bottom: 20px;">
      <a href="{% url 'create_article' %}" style="text-decoration: none;">
        <button style="
          padding: 10px 20px;
          background-color: #4CAF50;
          color: white;
          border: none;
          border-radius: 5px;
          cursor: pointer;">
          Create New Article
        </button>
      </a>
    </div>

    <!-- Tampilkan daftar artikel -->
    {% if articles %}
      {% for article in articles %}
        <div style="
          border: 1px solid #ccc;
          padding: 15px;
          margin-bottom: 15px;
          border-radius: 8px;
          background-color: #f9f9f9;">
          
          <h3 style="margin: 0; color: #333;">{{ article.title }}</h3>

          <!-- Tampilkan nama penulis atau Anonymous -->
          {% if article.author %}
            <p style="margin: 5px 0; color: #777;">By: {{ article.author }}</p>
          {% else %}
            <p style="margin: 5px 0; color: #777;">By: Anonymous</p>
          {% endif %}
          
          <!-- Tampilkan gambar artikel jika ada -->
          {% if article.image %}
            <img src="{{ article.image.url }}" alt="{{ article.title }}" style="max-width: 100%; height: auto; border-radius: 5px; margin-bottom: 10px;">
          {% endif %}

          <!-- Tampilkan konten artikel -->
          <p style="margin: 10px 0;">{{ article.content|truncatewords:30 }}</p>

          <!-- Tombol Edit dan Delete -->
          <div style="margin-top: 10px;">
            <a href="{% url 'edit_article' article.id %}" style="
              color: #1E90FF;
              text-decoration: none;
              margin-right: 10px;">
              Edit
            </a>
            <a href="{% url 'delete_article' article.id %}" style="
              color: #FF4500;
              text-decoration: none;">
              Delete
            </a>
          </div>
        </div>
      {% endfor %}
    {% else %}
      <p style="text-align: center; color: #777;">No articles found.</p>
    {% endif %}
  </div>
{% endblock %}
